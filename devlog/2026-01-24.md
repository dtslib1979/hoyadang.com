# TANGO MAGENTA — 개발일지 2026.01.24

---

## Session Summary

v3.0 시스템 완성 후 오디오 레이어 + 다국어 마크업 고도화 작업.

---

## 1. Audio Layer: Spotify → YouTube IFrame API 전환

### 문제
- Spotify embed: 자동 재생 불가 (브라우저 정책)
- 30초 프리뷰 제한, iframe reload 루프 불안정

### 해결
- YouTube IFrame Player API 도입
- `autoplay: 1, mute: 1` → 브라우저 autoplay 정책 우회
- 첫 유저 터치/클릭 시 `player.unMute()` 호출
- `loop: 1, playlist: VIDEO_ID` → 무한 반복 재생
- `<link rel="preconnect">` YouTube/Google 도메인 추가 (저지연)

### 비디오 ID 이슈
| ID | 출처 | 상태 |
|----|------|------|
| `UcUekXtC2wY` | Carlos Gardel 공식 채널 | 임베딩 차단 (레이블 제한) |
| `dBHhSVJ_S6A` | Scent of a Woman 장면 | 삭제됨 (404) |
| `gt8-DAi9Jmg` | Baires Ball — Argentine Tango | **사용 중** (임베딩 가능 확인) |

### 커밋
- `e3b724b` — Spotify → YouTube IFrame API 전환
- `8716976` — 임베딩 가능한 비디오 ID로 교체

---

## 2. CNN Breaking News Ticker (유지)

기존 v3.0에서 구현한 CNN 스타일 티커 그대로 유지:
- 빨간 `#cc0000` LIVE 배지 + 깜빡이는 흰 점
- 검은 배경, 흰 텍스트 스크롤
- 빨간 다이아몬드 구분자 (`.sep`)
- 높이 28px (원래 80px의 1/3)
- `@keyframes cnn-scroll` 22초 무한 루프

### CSS 수정
```css
/* 변경 전 */
.reproductor iframe { display: none; }

/* 변경 후 — YouTube iframe은 렌더링되어야 재생됨 */
/* YouTube player is hidden via container div inline styles */
```

---

## 3. 다국어 마크업: `lang="ko"` 적용

### 문제
- `<html lang="es-AR">`로 설정 시 브라우저가 한국어도 스페인어로 인식
- 번역/TTS 시 한국어 부분이 깨짐

### 해결
```html
<!-- 스페인어: 페이지 기본 lang으로 처리 -->
<p class="voz">Donde el cuerpo es la interfaz</p>

<!-- 한국어: 요소 레벨 lang 선언 -->
<span lang="ko" class="ko mt-sm">몸이 인터페이스인 곳</span>
```

### 효과
| 기능 | 동작 |
|------|------|
| Chrome 번역 | es→en, ko→en 각각 정확히 변환 |
| TTS 읽어주기 | 스페인어 음성 / 한국어 음성 자동 전환 |
| SEO | Google이 두 언어 모두 인덱싱 |
| 접근성 | 스크린리더 언어별 발음 정확 |

### 적용 범위
- 7개 HTML 파일, 33개 `.ko` 요소 전부 `lang="ko"` 추가
- 커밋: `1b02808`

---

## 4. 기술 메모: 브라우저 Autoplay 정책

### 현실
- 2018년 이후 모든 주요 브라우저: 음소거 없는 자동 재생 차단
- 음소거 자동 재생은 허용 (`muted autoplay`)
- 유저 제스처 후 `unMute()` 가능

### 제한사항
- **iOS Safari**: cross-origin iframe 내 오디오는 부모 페이지 유저 제스처를 인정 안 할 수 있음
- **데스크톱 Chrome/Firefox**: 대부분 정상 동작
- **Android Chrome**: 동작 가능하나 기기별 차이 있음

---

## 5. 파일 변경 요약

| 파일 | 변경 내용 |
|------|-----------|
| `index.html` | YouTube API, preconnect, lang="ko" |
| `emisión/index.html` | YouTube API, preconnect, lang="ko" |
| `cuerpo/index.html` | lang="ko" x8 |
| `laboratorio/index.html` | lang="ko" x6 |
| `control/index.html` | lang="ko" x1 |
| `legado/index.html` | lang="ko" x9 |
| `inner/index.html` | lang="ko" x1 |
| `design/tango.css` | iframe display:none 제거 |

---

## 6. Git Log

```
1b02808 feat: add lang="ko" to all Korean elements for bilingual SEO
8716976 audio: fix video ID — use embeddable Por una Cabeza version
e3b724b audio: switch from Spotify to YouTube IFrame API for autoplay
341181f audio: CNN breaking news ticker + autoplay on interaction
```

---

## 7. 남은 과제

- [ ] YouTube 오디오 실제 모바일 테스트 (iOS Safari 특히)
- [ ] Perlman/John Williams 버전 임베딩 가능한 YouTube ID 확보 시 교체
- [ ] PWA 오프라인 지원 검토
- [ ] Lighthouse 성능 감사

---

*작성: 2026-01-24*
*Architecture: TANGO MAGENTA v3.0*
*Audio: YouTube IFrame API + CNN Ticker*
*i18n: Inline bilingual (es-AR + ko) with element-level lang attributes*
